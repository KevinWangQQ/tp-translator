# TP Translator 词库功能测试指南

## 前置准备

1. 确保已在Figma中导入插件
2. 准备API Key（OpenAI 或 Google Gemini）
3. 创建包含多个文本元素的测试文档

## 测试用例

### 1. 基础词库功能测试

#### 1.1 添加词库条目
1. 打开插件：`Plugins` → `TP Translator`
2. 点击设置按钮⚙️
3. 切换到 "Standard Glossary" 标签页
4. 在表单中添加词条：
   - Source: "Hello"
   - Target: "你好"
   - 点击 "+ Add" 按钮
5. **期望结果**：词条出现在下方列表中

#### 1.2 批量添加词条
添加更多测试词条：
- "Settings" → "设置"
- "Login" → "登录" 
- "Welcome" → "欢迎"
- "App" → "应用程序"

#### 1.3 删除词条
1. 点击任意词条的"删除"按钮
2. **期望结果**：词条从列表中消失

#### 1.4 清空词库
1. 点击 "Clear All" 按钮
2. 确认清空操作
3. **期望结果**：所有词条被清空

### 2. 词库设置测试

#### 2.1 开关控制
1. 取消勾选 "Enable glossary matching"
2. 保存设置
3. 重新打开设置页面
4. **期望结果**：设置状态被正确保存

#### 2.2 匹配敏感度设置
1. 测试三种匹配模式：
   - Exact Match Only
   - Fuzzy Match (Recommended) 
   - Partial Match
2. **期望结果**：设置能正确保存和加载

### 3. 翻译集成测试

#### 3.1 词库匹配验证
1. 重新添加词库条目："Hello" → "你好"
2. 在Figma中选择包含"Hello"的文本
3. 配置翻译引擎（输入API Key）
4. 设置目标语言为中文
5. 开始翻译
6. **期望结果**：应该优先使用词库中的"你好"

#### 3.2 导入功能测试
1. 完成一次翻译后
2. 在翻译结果中点击 "📚 导入词库" 按钮
3. 回到设置页面查看词库
4. **期望结果**：翻译对应该被自动添加到词库

### 4. 用户体验测试

#### 4.1 键盘操作
1. 在词库添加表单中：
   - 在源文本框中按Enter键
   - **期望**：焦点移动到目标文本框
   - 在目标文本框中按Enter键
   - **期望**：自动添加词条

#### 4.2 错误处理
1. 尝试添加空的词条
2. **期望结果**：显示错误提示
3. 尝试添加重复的源文本
4. **期望结果**：更新现有词条并提示

### 5. 数据持久化测试

#### 5.1 保存和加载
1. 添加几个词库条目
2. 关闭插件
3. 重新打开插件
4. 检查设置页面
5. **期望结果**：词库数据应该完整保存

#### 5.2 跨会话测试
1. 完全关闭Figma
2. 重新打开Figma和插件
3. **期望结果**：词库数据仍然存在

## 测试检查列表

- [ ] 可以添加词库条目
- [ ] 可以删除单个词条
- [ ] 可以清空所有词条
- [ ] 词库开关功能正常
- [ ] 匹配敏感度设置正常
- [ ] 支持键盘操作（Enter键）
- [ ] 显示正确的错误提示
- [ ] 数据能够持久化保存
- [ ] 翻译时优先使用词库
- [ ] 可以从翻译结果导入词库
- [ ] 设置在重启后保持

## 调试信息

如果遇到问题，请检查：
1. **浏览器控制台**：`F12` → `Console` 查看错误信息
2. **Figma控制台**：`Plugins` → `Development` → `Open Console` 
3. **网络请求**：确认API Key配置正确

## 常见问题

### Q: 词库条目不显示？
A: 检查是否正确切换到 "Standard Glossary" 标签页

### Q: 翻译时没有使用词库？
A: 确认词库功能已启用且匹配模式设置正确

### Q: 数据不保存？
A: 确认点击了 "Save Settings" 按钮

### Q: API调用失败？
A: 检查网络连接和API Key的正确性