# TP Translator v1.1.7 发布说明

## 🎉 新版本特性

### 🔧 重要改进
- **品牌更新**: 插件正式更名为"TP Translator"，全新的品牌形象
- **🎯 节点定位功能**: 在翻译结果中添加定位按钮，一键跳转到Figma中对应的文本节点
- **🤖 默认引擎优化**: 默认使用Google Gemini作为翻译引擎，提供更好的翻译质量

## ✨ 新功能详解

### 1. 智能节点定位
- 在每个翻译成功的结果项中新增🎯定位按钮
- 点击后自动在Figma中选中并定位到对应文本节点
- 智能缩放和居中显示，确保节点可见
- 缩放算法自动适配节点大小，提供最佳视觉效果

### 2. 品牌全面升级
- 插件名称从"Cube Translator"更新为"TP Translator"
- 更新Logo图标：🧊 → 🔌
- 统一所有界面文本和标题
- 保持所有核心功能不变

### 3. 默认设置优化  
- 新用户默认选择Google Gemini引擎
- 更好的开箱即用体验
- 保持向后兼容性

## 🔧 技术改进

### 视口控制算法
- 实现智能缩放：`Math.min(Math.max(0.5, 1000/size), 3)`
- 自动居中算法确保节点始终在视图中心
- 100ms延迟确保视口操作的稳定性

### 消息通信机制
- 新增`locate-node`消息类型
- 完善的错误处理和状态反馈
- 实时定位状态提示

## 📦 文件结构

### 核心文件
- `manifest.json` - 插件配置文件 (661字节)
- `code.js` - Figma主线程代码 (16KB)
- `ui.html` - 用户界面入口 (54KB)  
- `ui.js` - UI逻辑和样式 (35KB)

### 发布包信息
- **文件名**: `tp-translator-v1.1.7.zip`
- **大小**: 24KB (压缩后)
- **解压后**: 107KB

## 🚀 安装方法

### Figma桌面应用安装
1. 下载 `tp-translator-v1.1.7.zip`
2. 解压到本地文件夹  
3. 打开Figma桌面应用
4. 选择 `Plugins` → `Development` → `Import plugin from manifest`
5. 选择解压文件夹中的 `manifest.json`
6. 安装完成！

### 使用方法
1. 在Figma中选择包含文本的节点
2. 打开插件：`Plugins` → `Development` → `TP Translator`
3. 配置API密钥（OpenAI或Gemini）
4. 选择源语言和目标语言
5. 点击"开始翻译"
6. 在结果中点击🎯按钮可定位到原始节点

## 🔄 版本对比

| 特性 | v1.1.5 | v1.1.7 |
|------|---------|--------|
| 插件名称 | Cube Translator | TP Translator |
| 节点定位 | ❌ | ✅ 智能定位 |
| 默认引擎 | OpenAI | Google Gemini |
| 视口控制 | ❌ | ✅ 智能缩放 |
| Logo图标 | 🧊 | 🔌 |

## ⚙️ 兼容性

### 支持的Figma版本
- Figma桌面应用（推荐）
- 支持所有现代浏览器

### API支持
- OpenAI GPT系列 (gpt-3.5-turbo-instruct, gpt-4, gpt-4-turbo)
- Google Gemini系列 (gemini-pro, gemini-1.5-pro, gemini-1.5-flash)

### 翻译模式
- 替换原文 (Replace)
- 原文旁边 (Beside)  
- 新建框架 (New Frame)
- 新建页面 (New Page)

## 🐛 已知问题

### 轻微限制
- 定位功能需要节点仍存在于当前页面
- 极小节点的缩放可能不够理想（已通过算法最小化影响）
- 跨页面节点定位需要切换到对应页面

### 解决方案
- 节点定位前会自动检查节点是否存在
- 提供清晰的错误提示和状态反馈
- 支持节点不存在时的优雅降级

## 📝 更新日志

### v1.1.7 (2024-09-02)
- ✅ 新增节点定位功能
- ✅ 品牌更新为TP Translator
- ✅ 默认引擎改为Gemini
- ✅ 智能视口控制算法
- ✅ 优化用户体验

### v1.1.5 (之前版本)
- 基础翻译功能
- 多引擎支持
- 自动重试机制

## 🎯 未来规划

### 即将推出
- 批量节点定位功能
- 翻译历史中的节点定位
- 更多视口控制选项
- 跨页面节点定位支持

### 长期目标
- 翻译质量评估
- 自定义翻译规则
- 团队协作功能
- 更多AI引擎集成

---

**TP Translator v1.1.7** - 让Figma翻译更智能、更高效！

*如有问题或建议，欢迎反馈。*