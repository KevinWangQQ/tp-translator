# Figma翻译插件 MVP 测试指南

## 📋 测试准备

### 1. 文件确认
确保以下文件存在并正确：
- ✅ `manifest.json` - 插件配置文件
- ✅ `dist/code.js` - 主线程代码 (1KB)
- ✅ `dist/ui.html` - UI界面文件
- ✅ `dist/ui.js` - UI逻辑代码 (3.4KB)
- ✅ `dist/vendors.js` - React依赖 (136KB)

### 2. 在Figma中加载插件

#### 方法一：通过manifest加载（推荐）
1. 打开 Figma Desktop 或者 Figma 网页版
2. 右键点击画布空白处
3. 选择 **Plugins** → **Development** → **Import plugin from manifest**
4. 选择项目根目录下的 `manifest.json` 文件
5. 插件会被添加到开发插件列表

#### 方法二：通过开发者菜单
1. 在 Figma 中按 `Ctrl/Cmd + /` 打开快速操作
2. 输入 "Plugins" 并选择
3. 点击 "Development" 标签
4. 点击 "Import plugin from manifest"
5. 选择 `manifest.json`

## 🧪 功能测试清单

### 3. 基础加载测试

#### 测试1: 插件启动
- [ ] 在 Plugins 菜单中找到 "Advanced Translator"
- [ ] 点击启动插件
- [ ] 应该看到一个320x500的插件窗口
- [ ] 窗口标题显示 "Advanced Translator"
- [ ] 界面显示 "Figma Translator MVP" 标题

#### 测试2: 初始状态检查
- [ ] 插件加载后显示 "Loading plugin..." （短暂）
- [ ] 然后显示主界面，包含：
  - Selection 部分（显示当前选择信息）
  - "Get Selection Info" 按钮
  - "Translate Test" 按钮

### 4. 选择功能测试

#### 测试3: 节点选择检测
1. **无选择状态**
   - [ ] 不选择任何对象
   - [ ] 检查插件显示：Total: 0 nodes, Text nodes: 0

2. **选择普通节点**
   - [ ] 创建一个矩形 (Rectangle)
   - [ ] 选择该矩形
   - [ ] 观察插件界面自动更新
   - [ ] 应显示：Total: 1 nodes, Text nodes: 0

3. **选择文本节点**
   - [ ] 创建一个文本框 (Text)
   - [ ] 输入一些文字，比如 "Hello World"
   - [ ] 选择该文本框
   - [ ] 应显示：Total: 1 nodes, Text nodes: 1

4. **多选测试**
   - [ ] 同时选择矩形和文本框
   - [ ] 应显示：Total: 2 nodes, Text nodes: 1

#### 测试4: Get Selection Info 按钮
- [ ] 点击 "Get Selection Info" 按钮
- [ ] 选择信息应该刷新
- [ ] 控制台应该有相关日志信息

### 5. 翻译功能测试

#### 测试5: 模拟翻译
1. **基础翻译测试**
   - [ ] 点击 "Translate Test" 按钮
   - [ ] 按钮文字应变为 "Translating..."
   - [ ] 按钮应被禁用（灰色状态）
   - [ ] 等待1秒后应显示结果

2. **翻译结果检查**
   - [ ] 翻译完成后在 "Result" 部分应显示：
     - "这是翻译结果 (模拟)"
   - [ ] 按钮恢复为 "Translate Test"
   - [ ] 按钮重新可点击

#### 测试6: 重复翻译
- [ ] 可以多次点击翻译按钮
- [ ] 每次都正常显示加载状态
- [ ] 结果正常更新

### 6. 实时交互测试

#### 测试7: 选择变化响应
1. **实时更新测试**
   - [ ] 创建多个文本框，内容如："Text 1", "Text 2", "Text 3"
   - [ ] 逐个选择，观察插件界面实时更新
   - [ ] 选择组合（Ctrl/Cmd + 点击多选）
   - [ ] 取消选择（点击空白处）

2. **页面切换测试**
   - [ ] 创建新页面
   - [ ] 切换页面，观察插件是否正常响应
   - [ ] 在新页面创建文本，测试选择功能

### 7. 控制台调试

#### 测试8: 开发者工具检查
1. **打开控制台**
   - 在 Figma 中按 `F12` 或 `Ctrl/Cmd + Shift + I`
   - 切换到 Console 标签

2. **检查日志输出**
   - [ ] 插件加载时应显示："Figma Translator Plugin loaded"
   - [ ] 选择节点时应显示相关消息
   - [ ] 点击按钮时应显示对应操作日志

3. **检查错误**
   - [ ] 控制台中不应有红色错误信息
   - [ ] 如有警告，确认是否影响功能

### 8. 错误处理测试

#### 测试9: 异常情况
1. **快速操作测试**
   - [ ] 快速连续点击翻译按钮
   - [ ] 在翻译进行中切换选择
   - [ ] 在翻译进行中关闭插件再重新打开

2. **边界条件**
   - [ ] 选择非常多的对象（10+）
   - [ ] 创建很长的文本内容
   - [ ] 在空文档中测试插件

## 🐛 常见问题排查

### 插件无法加载
- 检查 `manifest.json` 路径是否正确
- 确认 `dist/` 目录下所有文件都存在
- 重新构建：`npm run build`

### 界面显示异常
- 检查控制台是否有JavaScript错误
- 确认 React 依赖正确加载

### 选择功能不工作
- 确认在 Figma 中有选择对象
- 检查控制台日志确认消息传递

### 翻译按钮无响应
- 检查控制台是否有错误
- 确认UI和主线程通信正常

## 📝 测试结果记录

完成测试后，请记录：
- ✅ 通过的测试项目
- ❌ 失败的测试项目
- 🐛 发现的问题和错误信息
- 💡 改进建议

## 🚀 测试完成后的下一步

MVP测试成功后，我们可以继续开发：
1. 集成真实的 OpenAI API
2. 实现实际的文本翻译和替换
3. 添加更多翻译引擎支持
4. 完善用户界面和设置功能

---

**开始测试吧！** 如果遇到任何问题，请记录具体的错误信息和重现步骤。